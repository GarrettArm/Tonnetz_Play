# File name: notegame.kv


<RootWidget>:
	canvas.before:
		Rectangle:
			source: 'images/woodgrain.jpg'
			pos: self.pos
			size: self.size

	SplitPanes:
		orientation: 'horizontal'
		NoteMatrixFundFloat:
			width: self.parent.width
			canvas.before:
				Color: 
					rgba: 0.972, 0.9, 0.539, .5
				BorderImage:
					border: 20,20,20,20
					source: 'images/ball.png'
					size: self.size
					pos: self.pos
			FundStencil:
				FundFloat:
					width: self.parent.width
					FundScatterPlane:
						id: fundscatterplane
						do_rotation: False
						size: self.parent.size
						FundMatrix:
							id: FundMatrix
		NoteMatrixMelodyFloat:
			canvas:
				Color: 
					rgba: 0.972, 0.9, 0.539, 0.5
				BorderImage:
					border: 20,20,20,20
					source: 'images/ball.png'
					size: self.size
					pos: self.pos
			MelodyStencil:
				pos_hint: {'x': 0, 'y': 0}
				MelodyFloat:
					pos: self.parent.pos
					size: self.parent.size
					MelodyRelative:
						pos: self.parent.pos
						size: self.parent.size
						MelodyScatter:
							id: melodyscatter
							do_rotation: False
							MelodyMatrix:
								id: melodymatrix

	AnchorLayout:
		anchor_x: 'left'
		anchor_y: 'top'
		Button:
			size_hint: .037, .05
			border: [0,0,0,0]
			background_color: [1,.91,.43,1]
			background_normal: 'images/gear.png'
			background_down: 'images/gear.png'
			on_release: app.open_settings()

	AnchorLayout:
		anchor_x: 'right'
		anchor_y: 'top'
		BoxLayout:
			pos: self.parent.pos
			size_hint: .08, .05
			Button:
				border: [0,0,0,0]
				background_color: [1,1,1,.7]
				background_normal: 'images/stop.png'
				background_down: 'images/stop.png'
				on_release: melodymatrix.silence()				
			ToggleButton:
				border: [0,0,0,0]
				background_color: [1,1,1,.9]
				background_normal: 'images/lock_open.png'
				background_down: 'images/lock_closed.png'
				on_release: melodyscatter.lock(self.state)
				on_release: fundscatterplane.lock(self.state)


<NotePoint>:
	canvas:
		Color:
			rgba: self.color
		Ellipse:
			source: 'images/ball.png'
			pos: self.pos
			size: self.size         
			on_touch_down: self.on_touch_down
			on_touch_up: self.on_touch_up
	NotePointLabel:


#reference defs
<SplitPanes@BoxLayout>
<NoteMatrixFundFloat@FloatLayout>
<FundStencil@StencilView>
<FundFloat@FloatLayout>
<NoteMatrixMelodyFloat@FloatLayout>
<MelodyStencil@StencilView>
<MelodyFloat@FloatLayout>
<MelodyRelative@RelativeLayout>
